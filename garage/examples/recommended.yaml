# Recommended configuration enabling Web UI access behind Ingress
deployment:
  replicaCount: 3

garage:
  replicationFactor: "2"
  s3:
    api:
      rootDomain: ".s3.garage.example.com"
    web:
      rootDomain: ".web.garage.example.com"

persistence:
  enabled: true
  data:
    storageClass: garage-data-hdd
    size: 10Gi
  meta:
    storageClass: garage-meta-ssd
    size: 500Mi

clusterConfig:
  enabled: true
  layout:
    enabled: true
    zone: dc1
  buckets:
    - name: media
      public: true
    - name: backups
    - name: staging
  keys:
    recommended-key:
      keyId: GK89ABCDEF0123456789ABCDEF
      secretKey: fedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210
      buckets:
        - media
        - backups
        - staging

ingress:
  s3:
    api:
      enabled: true
      className: nginx
      hosts:
        - host: s3.garage.example.com
          paths:
            - path: /
              pathType: Prefix
      tls:
        - secretName: s3-garage-tls
          hosts:
            - s3.garage.example.com
    web:
      enabled: true
      className: nginx
      hosts:
        - host: web.garage.example.com
          paths:
            - path: /
              pathType: Prefix
      tls:
        - secretName: web-garage-tls
          hosts:
            - web.garage.example.com

webui:
  enabled: true

  auth:
    enabled: true
    userPassHash: "admin:$2y$10$wjnUPtyPiODuT7f1t5rs5O.HYYpM0EeP0D7EXoeHKfBwPX7rUSaTG" # htpasswd -nbBC 10 "admin" "admin1234"

  ingress:
    enabled: true
    className: nginx
    hosts:
      - host: garage-ui.example.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: garage-ui-tls
        hosts:
          - garage-ui.example.com
